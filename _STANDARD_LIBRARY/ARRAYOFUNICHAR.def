(* (C) 2009-2013 by B.Kowarsch & R.Sutcliffe. All rights reserved. *)

DEFINITION MODULE ARRAYOFUNICHAR;

(* I/O and Concatenation for ARRAY OF UNICHAR Types *)

FROM FileIO IMPORT File;

PROCEDURE Concat ( VAR result : ARRAY OF UNICHAR;
                       items  : VARIADIC OF ARRAY OF UNICHAR );
(* Concatenates  two or more ARRAY OF UNICHAR values  passed in for items  in
   the order they appear in the argument list  and passes back  the resulting
   ARRAY OF UNICHAR in result.  If  only a single argument  is passed in  for
   items, the argument is passed back verbatim in result.  String terminators
   in between concatenation items  are removed.  A final string terminator is
   appended to the end of the result.  The capacity of the variable passed in
   for result must be sufficient to hold the result including string termina-
   tor.  If it is  not sufficient, runtime fault StringCapacityExceeded shall
   be raised.  This procedure  is substituted  for invocations of CONCAT when
   CONCAT's first argument is a variable of an ARRAY OF UNICHAR type. *)

PROCEDURE Read ( infile : File; VAR s : ARRAY OF UNICHAR );
(* Reads a string value from stream infile
   - any leading whitespace is skipped
   - the character being read is removed from infile
   - the code point of the character value read is assigned to s
   - the file status is set to any of:
     success, outOfRange, wrongFormat, endOfLine, or endOfInput.
   This procedure is substituted for invocations of READ with an
   ARRAY OF UNICHAR type argument. *)

PROCEDURE Write ( outfile : File; CONST s : ARRAY OF UNICHAR );
(* Writes string s to stream outfile. This procedure is substituted
   for invocations of WRITE with an ARRAY OF UNICHAR type argument.*)

PROCEDURE WriteF ( outfile      : File;
                   CONST fmtStr : ARRAY OF CHAR;
                   items        : VARIADIC OF ARRAY OF UNICHAR );
(* Writes a formatted textual representation of one or more ARRAY OF UNICHAR
   values to output stream outfile. The output format is determined by fmtStr.
   This procedure is substituted for invocations of WRITEF with one or more
   ARRAY OF UNICHAR arguments. *)

END ARRAYOFUNICHAR.
