(* (C) 2016 by B.Kowarsch & R.Sutcliffe. All rights reserved. *)

DEFINITION MODULE ChanIO;

(* Channel Based IO *)

IMPORT IOStatus, IOSIZE;

(* Channel Root Type *)

TYPE Channel = POINTER TO Descriptor;

(* Channel Root Descriptor *)

TYPE Descriptor = RECORD ( NIL )
  (* method slots for generic input *)
  ready : PROCEDURE ( Channel ) : BOOLEAN;
  Get   : PROCEDURE ( Channel, VAR OCTET, VAR IOStatus );
  GetN  : PROCEDURE ( Channel, VAR ARRAY OF OCTET, VAR IOStatus );
  (* method slots for generic output *)
  Put   : PROCEDURE ( Channel, OCTET, VAR IOStatus );
  PutN  : PROCEDURE ( Channel, ARRAY OF OCTET, VAR IOSIZE, VAR IOStatus );
  Sync  : PROCEDURE ( Channel, VAR IOStatus )
END;

END ChanIO.